\documentclass[10pt,a4paper]{article}

\usepackage[a-1b]{pdfx} %high quality pdf
\usepackage{datetime}
\usepackage{numprint}
\usepackage{palatino}
\usepackage{authblk}
\usepackage[margin=0.75in]{geometry}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{titlesec}
\usepackage{listings}

\pdfgentounicode=1

\setlength{\parindent}{2em}
%\setlength{\parskip}{1em}
\renewcommand{\baselinestretch}{1.1}

\begin{document}

\nplpadding{2}
\newdateformat{isodate}{\THEYEAR-\numprint{\THEMONTH}-\numprint{\THEDAY}}

\title{Penetration Testing Report for Ex0b0\\ \large{\textit{Codename: `NetcatPivot`}}}
\author{Naman Arora\\\small{Pr0b3 LLC}}
\date{\isodate\today}

\maketitle
\section{Attack Narrative}
\begin{figure}[h!]
	\includegraphics[width=\textwidth]{pics/plunder_intf.png}
	\caption{Identifying Network Interfaces on \textit{`plunder.pr0b3.com`}}
	\label{plunder_intf}
\end{figure}
Once an authenticated access to \textit{`plunder.pr0b3.com`} is established, the network interface of the machine running the \textit{SSH} daemon can be identified usig the \textbf{\textit{`ip addr`}} command in unison with running \textbf{\textit{`lsof -i -n`}} on the \textit{`kali.pr0b3.com`}.
The former command shows both the interfaces while the latter identifies the IP address of the current SSH connection to \textit{`plunder.pr0b3.com`}.
Using this technique, the \textit{interface 1} can be eliminated from the list of two interfaces shown and \textit{interface 2} can be identified as \textit{`ens160`} (Fig \ref{plunder_intf}).


\begin{figure}[h!]
	\includegraphics[width=\textwidth]{pics/srv_wget_cnf.png}
	\caption{Identifying IP address of Host Offering web application service}
	\label{srv_wget_cnf}
\end{figure}
Now, the ARP cache of the \textit{`plunder.pr0b3.com`} can be leveraged to find out hosts in the network of \textit{interface 2}.
This can be done using the command \textbf{\textit{`ip neigh`}} (Fig \ref{srv_wget_cnf} on left pane).
To confirm a web server is running on the host \textit{`45.79.140.13`}, a \textit{wget} request from another SSH session on \textit{`plunder.pr0b3.com`} would suffice (Fig \ref{srv_wget_cnf} on right pane).


\begin{figure}[h!]
	\includegraphics[width=\textwidth]{pics/nc_setup.png}
	\caption{\textit{Netcat} Connector/Listener setup for Pivoting}
	\label{nc_setup}
\end{figure}
A \textit{Netcat} listener on \textit{`plunder.pr0b3.com`@12345} which passes its STDIN and STDOUT to a connector connecting to \textit{`45.79.140.13`@80} is executed (Fig \ref{nc_setup} on top two panes).
To complement it, a \textit{Netcat} connector connecting to \textit{`plunder.pr0b3.com`@12345} from \textit{`kali.pr0b3.com`} is executed which in turn passes its STDIN and STDOUT to a \textit{Netcat} listener listening at \textit{`127.0.0.1`@12346} (Fig \ref{nc_setup} on bottom two panes).


\begin{figure}[h!]
	\includegraphics[width=\textwidth]{pics/webpg_hit.png}
	\caption{Accessing the Website at \textit{`45.79.140.13`@80}}
	\label{webpg_hit}
\end{figure}
Having done that, a web browser session visiting the address \textit{`http://127.0.0.1:12346`} would eventually be able to access the website being hosted on \textit{`45.79.140.13`@80} (Fig \ref{webpg_hit}).

\end{document}
